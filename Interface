# Stéganographie - v0.1
# Ce script est l'interface d'un programme qui dissimule du texte dans une image
# License libre CC
# Colin Laganier - Thomas Lemenestrel - 2017.12.13

from tkinter.filedialog import *
from tkinter.messagebox import *
from tkinter import *
from PIL import Image, ImageTk

root = Tk() # On crée une fenêtre
root.geometry('800x600') # On donne les dimensions de la fenêtre
root.configure(background='#333d4f')

imgName = 0

frameTitle = Frame(root, bg="yellow", colormap="new")
frameTitle.pack(side=TOP)

title = Label(frameTitle, text="STEGANOGRAPHIE", bg="#333d4f", fg="white", font=("Helvetica", 16))
title.pack()

frameImg = Frame(root, bg="red", colormap="new")
frameImg.pack(side = TOP, pady = 20)

canvas = Canvas(frameImg, width=500, height=350)
canvas.pack(side=LEFT)

canvas.create_rectangle(0, 0, 500, 350, fill="purple")
canvas.pack(side=LEFT)

def InsertImg():
    imgName = filedialog.askopenfilename(initialdir = "/",title = "Choisir image",filetypes = (("gif files","*.gif"),("all files","*.*")))
    image = Image.open(imgName)
    imgBrut= ImageTk.PhotoImage(image)
    label = Label(canvas, image=imgBrut)
    label.image = imgBrut
    label.pack()

boutonInsertImg = Button(frameImg, text ='Insert Image', command = InsertImg)
boutonInsertImg.pack(side = LEFT, padx = 5)

frameVar = Frame(root, bg="pink", colormap="new")
frameVar.pack(side = TOP)

check = Checkbutton(frameVar, text="Traitement d'image à text", variable = IntVar())
check.pack(side = LEFT)

frameTxt = Frame(root, bg="blue", colormap="new")
frameTxt.pack(side = TOP, pady = 20)

def InsertText():
    if imgName == 0:
        showinfo("Erreur", "Il faut inseré une image pour faire fonctionner le programme !")
    elif (len(entreText.get())*8+8) > (hauteur*largeur):
        showinfo("Erreur", "Le text introduit est trop long pour l'image donnée !")

entreText = StringVar()
boite = Entry(frameTxt, textvariable = entreText, bg = 'green', width = '40')
boite.focus_set()
boite.pack(side = LEFT, ipady = 15)

boutonInsertText = Button(frameTxt,text = 'Insert Text', command = InsertText)
boutonInsertText.pack(side = LEFT, padx = 10)

frameSup = Frame(root, bg="pink", colormap="new")
frameSup.pack(side = TOP, pady = 13)

def InsertInfo():
	showinfo("Info", "Ce programme dissimule du texte dans une image, et permet de lire le texte dissimuler dans une image donnée.")

boutonInfo = Button(frameSup, text='Info', command = InsertInfo)
boutonInfo.pack(side = RIGHT)

boutonExit = Button(frameSup, text='Exit', command = root.destroy)
boutonExit.pack(side = RIGHT)

root.mainloop() # On démarre la boucle Tkinter qui s'interompt quand on ferme la fenêtre
