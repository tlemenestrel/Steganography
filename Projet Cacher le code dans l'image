# Stéganographie - v0.1
# Ce script est un programme qui dissimule du texte dans une image
# License libre CC
# Colin Laganier - Thomas Lemenestrel - 2017.12.13

from PIL import Image
from interface import *
img = Image.open(imgName) # On importe l'image dans laquelle on va mettre le message
Texte = "Je m'appelle Thomas"

largeur = img.width 
largeur = img.height
red,green,blue = img.split() # On divise l'image en pixels RVB
redPix = list(red.getdata()) # On importe la liste 

longTxt = len(Texte)
longBin = bin(len(longTxt))[2:].rjust(8,"0")

ListeBinaire=[bin(ord(x))[2:].rjust(8,"0") for x in Texte]
ChaineBinaire=''.join(ListeBinaire) # On transforme la liste en chaine
for j in range(8):
    redPix[j]=2*int(redPix[j]//2)+int(longBin[j]) # On insère la longueur de la liste dans les 8 premiers pixels

#on code la chaine dans les pixels suivants
for i in range(8*longueurText):
    redPix[i+8]=2*int(redPix[i+8]//2)+int(ChaineBinaire[i])
#on recrée l'image rouge 
ImageRefaite = Image.new("L",(16*p,16*q))
ImageRefaite = Image.new("L",(largeur,hauteur))
ImageRefaite.putdata(redPix)
#fusion des trois nouvelles images
ImageFinale = Image.merge('RGB',(ImageRefaite,g,b)) 
ImageFinale.save("Stéganographie.png") 
if "Stéganographie.png"  == true:
	ImageFinale.save("Stéganographie.png")
